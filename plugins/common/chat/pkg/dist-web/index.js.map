{"version":3,"file":"index.js","sources":["../dist-src/index.js"],"sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nexport default\n/*#__PURE__*/\n(function () {\n  var _ref2 = _asyncToGenerator(\n  /*#__PURE__*/\n  regeneratorRuntime.mark(function _callee7(_ref) {\n    var __deps__, __imports__, _imports__$grommet, Box, TextInput, Button, _imports__$utils, React, _, icons, napi, NodeView, iconSize, viewer, view, edit, icon, preview;\n\n    return regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            __deps__ = _ref.__deps__, __imports__ = _ref.__imports__;\n            _imports__$grommet = __imports__.grommet, Box = _imports__$grommet.Box, TextInput = _imports__$grommet.TextInput, Button = _imports__$grommet.Button;\n            _imports__$utils = __imports__.utils, React = _imports__$utils.React, _ = _imports__$utils.lodash, icons = _imports__$utils.icons;\n            napi = __deps__.napi, NodeView = __deps__.NodeView, iconSize = __deps__.iconSize, viewer = __deps__.viewer;\n\n            view = function view(_ref3) {\n              var node = _ref3.node;\n\n              // const value = _.get(node, 'sides.web.src', defaultSrc)\n              var _React$useState = React.useState([]),\n                  _React$useState2 = _slicedToArray(_React$useState, 2),\n                  messages = _React$useState2[0],\n                  setMessages = _React$useState2[1];\n\n              var _React$useState3 = React.useState(''),\n                  _React$useState4 = _slicedToArray(_React$useState3, 2),\n                  message = _React$useState4[0],\n                  setMessage = _React$useState4[1];\n\n              var getOrCreateChatNode =\n              /*#__PURE__*/\n              function () {\n                var _ref4 = _asyncToGenerator(\n                /*#__PURE__*/\n                regeneratorRuntime.mark(function _callee() {\n                  var chatNode;\n                  return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return napi.findNode({\n                            parentId: node.id,\n                            name: '.chat'\n                          });\n\n                        case 2:\n                          chatNode = _context.sent;\n\n                          if (!(chatNode.status === 'error')) {\n                            _context.next = 7;\n                            break;\n                          }\n\n                          _context.next = 6;\n                          return napi.createNode(null, {\n                            parentId: node.id,\n                            name: '.chat'\n                          });\n\n                        case 6:\n                          chatNode = _context.sent;\n\n                        case 7:\n                          return _context.abrupt(\"return\", chatNode);\n\n                        case 8:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }));\n\n                return function getOrCreateChatNode() {\n                  return _ref4.apply(this, arguments);\n                };\n              }();\n\n              React.useEffect(function () {\n                var getInitialMessages =\n                /*#__PURE__*/\n                function () {\n                  var _ref5 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee2() {\n                    var chatNode, messageNodes;\n                    return regeneratorRuntime.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            _context2.next = 2;\n                            return getOrCreateChatNode();\n\n                          case 2:\n                            chatNode = _context2.sent;\n                            console.log('chat node', chatNode);\n                            _context2.next = 6;\n                            return napi.getNodeChildren(chatNode);\n\n                          case 6:\n                            messageNodes = _context2.sent;\n                            console.log('message nodes', messageNodes);\n                            setMessages(messageNodes.items.map(function (msgNode) {\n                              return {\n                                id: msgNode.id,\n                                text: msgNode.name\n                              };\n                            }));\n\n                          case 9:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function getInitialMessages() {\n                    return _ref5.apply(this, arguments);\n                  };\n                }();\n\n                getInitialMessages();\n              }, []);\n              React.useEffect(function () {\n                var callback =\n                /*#__PURE__*/\n                function () {\n                  var _ref7 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee3(_ref6) {\n                    var type, node;\n                    return regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            type = _ref6.type, node = _ref6.node;\n                            console.log('chat update!', type, node);\n\n                            if (type === 'add') {\n                              setMessages([].concat(_toConsumableArray(messages), [{\n                                id: messages.length + 1,\n                                text: node.name\n                              }]));\n                            }\n\n                          case 3:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function callback(_x2) {\n                    return _ref7.apply(this, arguments);\n                  };\n                }();\n\n                var subscribe =\n                /*#__PURE__*/\n                function () {\n                  var _ref8 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee4() {\n                    var chatNode;\n                    return regeneratorRuntime.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            _context4.next = 2;\n                            return getOrCreateChatNode();\n\n                          case 2:\n                            chatNode = _context4.sent;\n                            napi.subscribeToNodeChildrenUpdates(chatNode.id, callback);\n\n                          case 4:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function subscribe() {\n                    return _ref8.apply(this, arguments);\n                  };\n                }();\n\n                var unsubscribe =\n                /*#__PURE__*/\n                function () {\n                  var _ref9 = _asyncToGenerator(\n                  /*#__PURE__*/\n                  regeneratorRuntime.mark(function _callee5() {\n                    var chatNode;\n                    return regeneratorRuntime.wrap(function _callee5$(_context5) {\n                      while (1) {\n                        switch (_context5.prev = _context5.next) {\n                          case 0:\n                            _context5.next = 2;\n                            return getOrCreateChatNode();\n\n                          case 2:\n                            chatNode = _context5.sent;\n                            napi.unsubscribeFromNodeChildrenUpdates(chatNode.id, callback);\n\n                          case 4:\n                          case \"end\":\n                            return _context5.stop();\n                        }\n                      }\n                    }, _callee5);\n                  }));\n\n                  return function unsubscribe() {\n                    return _ref9.apply(this, arguments);\n                  };\n                }();\n\n                subscribe();\n                return function () {\n                  unsubscribe();\n                };\n              });\n\n              var sendMessage =\n              /*#__PURE__*/\n              function () {\n                var _ref10 = _asyncToGenerator(\n                /*#__PURE__*/\n                regeneratorRuntime.mark(function _callee6() {\n                  var chatNode, newMessageNode;\n                  return regeneratorRuntime.wrap(function _callee6$(_context6) {\n                    while (1) {\n                      switch (_context6.prev = _context6.next) {\n                        case 0:\n                          console.log('in submit', message);\n\n                          if (!(message !== '')) {\n                            _context6.next = 10;\n                            break;\n                          }\n\n                          _context6.next = 4;\n                          return getOrCreateChatNode();\n\n                        case 4:\n                          chatNode = _context6.sent;\n                          _context6.next = 7;\n                          return napi.createNode(null, {\n                            parentId: chatNode.id,\n                            name: message\n                          });\n\n                        case 7:\n                          newMessageNode = _context6.sent;\n                          console.log('new message node', newMessageNode); // setMessages([...messages, { id: messages.length + 1, text: message }])\n\n                          setMessage('');\n\n                        case 10:\n                        case \"end\":\n                          return _context6.stop();\n                      }\n                    }\n                  }, _callee6);\n                }));\n\n                return function sendMessage() {\n                  return _ref10.apply(this, arguments);\n                };\n              }();\n\n              return React.createElement(Box, {\n                fill: true,\n                align: \"center\",\n                justify: \"center\"\n              }, React.createElement(Box, {\n                overflow: \"scroll\",\n                fill: true,\n                align: \"center\",\n                background: {\n                  color: 'black',\n                  opacity: 'medium'\n                },\n                pad: \"small\"\n              }, messages.map(function (message) {\n                return React.createElement(Box, {\n                  key: message.id,\n                  fill: \"horizontal\",\n                  height: \"xsmall\",\n                  background: {\n                    color: 'black',\n                    opacity: 'medium'\n                  },\n                  pad: \"small\"\n                }, message.text);\n              }), React.createElement(TextInput, {\n                value: message,\n                onChange: function onChange(event) {\n                  return setMessage(event.target.value);\n                }\n              }), React.createElement(Button, {\n                label: \"Send\",\n                onClick: function onClick() {\n                  return sendMessage();\n                }\n              })));\n            };\n\n            edit = view;\n\n            icon = function icon(_ref11) {\n              var node = _ref11.node;\n              return React.createElement(Box, {\n                fill: true,\n                align: \"center\",\n                justify: \"center\"\n              }, React.createElement(icons.Chat, {\n                size: iconSize\n              }));\n            };\n\n            preview = icon;\n            return _context7.abrupt(\"return\", {\n              modes: {\n                icon: icon,\n                preview: preview,\n                view: view,\n                edit: edit\n              }\n            });\n\n          case 9:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n})();"],"names":[],"mappings":"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"}